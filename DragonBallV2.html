
<div class="banner">
    <br><br><br>
    <button type="action" name="act_attributes" >Attributes</button>
    <button type="action" name="act_attacks" >Attacks</button>
    <button type="action" name="act_abilities">Abilities</button>
    <button type="action" name="act_transformations">Transformations</button>
    <button type="action" name="act_settings">Settings</button>
</div>
<input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab'  value='attributes'  />
<br>
    <!--The attributes division that creates all of the attributes input for the players-->
<div class='attributes'>
    <div class ="character">
        <div class="info">
            <div class="attr-head">
                <h1>Character</h1>
                <div><label>Character name: <input name="attr_character_name" type="text" style="width:120px;" /></label></div>
                <div><label>Tier of Power:<input name="attr_tier_of_power" type="number" value="floor((@{power_level})/5)+1" style="width: 50px;" disabled="true" /></label></div>
                <input type="hidden" name="attr_power_die" value="[[1d0]]"/>
                
            </div>

            <div class="attr-top">
                <div><label>
                    Race:
                    <select name="attr_race" style="width:100px;">
                        <option value="android">Android</option>
                        <option value="arcosian">Arcosian</option>
                        <option value="human">Earthling</option>
                        <option value="namekians">Namekian</option>
                        <option value="majin">Majin</option>
                        <option value="saiyan">Saiyan</option>
                        <option value="shinjin">Shinjin</option>
                        <option value="tuffle">Tuffle</option>
                        <option value="custom">Custom</option>
                    </select>
                    </label>
                </div>
                <div><label>Subrace:<input type="text" name="attr_subrace" style="width:100px;" value=""/></label></div>
                <input type="hidden" name="attr_hp_modifier" value="0"/>
                <div><label>HP: <input type="number" name="attr_hp" value="0" /> / <input type="number" name="attr_hp_max" value="20"/><button name="roll_health" type="roll" value="/r 1d10+@{hp_modifier}+@{tenacity_modifier}"></button></label></div>
                
                <div><label>Power Level: <input type="number" name="attr_power_level" value="1" /></label></div>
                <div><label>Initiative:  <input type="number" name="attr_init_mod" value="0" style="width:50px;"/><button type="roll" value="/r 1d10!10+floor(@{agility_tfmodifier}/2)+@{init_mod} &{tracker}"></button> </label></div>
            </div>
            
            <div class="attr-bot">
                <div><label>Ki Pool:  <input type="number" name="attr_ki" value="0" /> / <input type="number" name="attr_ki_max" value="26" readonly /> </label></div>
                <div><label>Capacity Rate: <input type="checkbox" name="attr_power_up" value="1"/>  <input type="number" name="attr_capacity" value="0"/> / <input type="number" name="attr_capacity_max" value="14" readonly /></label></div>
                <div><label>Zeni: <input type="number" name="attr_zeni" value="0"/></label></div>
                <div><label>XP: <input type="number" name="attr_xp" value = "0"/> </label></div>
                <div><label>TXP: <input type="number" name="attr_txp" value="0"/></label></div>
            </div>
        </div>

        <br>

        <div class="stats">
            <div class="all-stats">
                <div class="ability-table">
                    <div class="abilityName"><p>NAME</p></div>
                    <div class="abilityMod"><p>MOD</p></div>
                    <div class="abilityTrans"><p>TF MOD</p></div>
                    <div class="abilityRanks"><p>RANKS</p></div>
                    <div class="abilityRacial"><p>RACIAL</p></div>
                    <div class="abilityTotal"><p>TOTAL</p></div>

                    
                    <div class="abilityName"><button class="ability" type="roll" name="roll_agility" value="/r 1d10!10+@{agility_tfmodifier}+@{power_die}">Agility</button></div>
                    <div class="abilityMod"><input type="number" name="attr_agility_modifier" value="1" readonly /></div>
                    <div class="abilityTrans"><input type="number" name="attr_agility_tfmodifier" value="1" readonly /></div>
                    <div class="abilityRanks"><input type="number" name="attr_agility_ranks" value="2" /></div>
                    <div class="abilityRacial"><input type="number" name="attr_agility_racial" value="0" /></div>
                    <div class="abilityTotal"><input type="number" name="attr_agility" value="2" readonly /></div>
                    <input type="hidden" value="0" name="attr_agility_tf">
                    
                    <div class="abilityName"><button class="ability" type="roll" name="roll_force" value="/r 1d10!10+@{force_tfmodifier}+@{power_die}">Force</button></div>
                    <div class="abilityMod"><input type="number" name="attr_force_modifier" value="1" readonly /></div>
                    <div class="abilityTrans"><input type="number" name="attr_force_tfmodifier" value="1" readonly /></div>
                    <div class="abilityRaclnks"><input type="number" name="attr_force_ranks" value="2" /></div>
                    <div class="abilityRacial"><input type="number" name="attr_force_racial" value="0" /></div>
                    <div class="abilityTotal"><input type="number" name="attr_force" value="2" readonly /></div>
                    <input type="hidden" value="0" name="attr_force_tf">

                    <div class="abilityName"><button class="ability" type="roll" name="roll_tenacity" value="/r 1d10!10+@{tenacity_tfmodifier}+@{power_die}">Tenacity</button></div>
                    <div class="abilityMod"><input type="number" name="attr_tenacity_modifier" value="1" readonly /></div>
                    <div class="abilityTrans"><input type="number" name="attr_tenacity_tfmodifier" value="1" readonly /></div>
                    <div class="abilityRanks"><input type="number" name="attr_tenacity_ranks" value="2" /></div>
                    <div class="abilityRacial"><input type="number" name="attr_tenacity_racial" value="0" /></div>
                    <div class="abilityTotal"><input type="number" name="attr_tenacity" value="2" readonly /></div>
                    <input type="hidden" value="0" name="attr_tenacity_tf">

                    <div class="abilityName"><button class="ability" type="roll" name="roll_scholarship" value="/r 1d10!10+@{scholarship_tfmodifier}+@{power_die}">Scholarship</button></div>
                    <div class="abilityMod"><input type="number" name="attr_scholarship_modifier" value="1" readonly /></div>
                    <div class="abilityTrans"><input type="number" name="attr_scholarship_tfmodifier" value="1" readonly /></div>
                    <div class="abilityRanks"><input type="number" name="attr_scholarship_ranks" value="2" /></div>
                    <div class="abilityRacial"><input type="number" name="attr_scholarship_racial" value="0" /></div>
                    <div class="abilityTotal"><input type="number" name="attr_scholarship" value="2" readonly /></div>
                    <input type="hidden" value="0" name="attr_scholarship_tf">

                    <div class="abilityName"><button class="ability" type="roll" name="roll_insight" value="/r 1d10!10+@{insight_tfmodifier}+@{power_die}">Insight</button></div>
                    <div class="abilityMod"><input type="number" name="attr_insight_modifier" value="1" readonly /></div>
                    <div class="abilityTrans"><input type="number" name="attr_insight_tfmodifier" value="1" readonly /></div>
                    <div class="abilityRanks"><input type="number" name="attr_insight_ranks" value="2" /></div>
                    <div class="abilityRacial"><input type="number" name="attr_insight_racial" value="0" /></div>
                    <div class="abilityTotal"><input type="number" name="attr_insight" value="2" readonly /></div>
                    <input type="hidden" value="0" name="attr_insight_tf">

                    <div class="abilityName"><button class="ability" type="roll" name="roll_spirit" value="/r 1d10!10+@{spirit_tfmodifier}+@{power_die}">Spirit</button></div>
                    <div class="abilityMod"><input type="number" name="attr_spirit_modifier" value="1" readonly /></div>
                    <div class="abilityTrans"><input type="number" name="attr_spirit_tfmodifier" value="1" readonly /></div>
                    <div class="abilityRanks"><input type="number" name="attr_spirit_ranks" value="2" /></div>
                    <div class="abilityRacial"><input type="number" name="attr_spirit_racial" value="0" /></div>
                    <div class="abilityTotal"><input type="number" name="attr_spirit" value="2" readonly /></div>
                    <input type="hidden" value="0" name="attr_spirit_tf">

                    <div class="abilityName"><button class="ability" type="roll" name="roll_personality" value="/r 1d10!10+@{personality_tfmodifier}+@{power_die}">Personality</button></div>
                    <div class="abilityMod"><input type="number" name="attr_personality_modifier" value="1" readonly /></div>
                    <div class="abilityTrans"><input type="number" name="attr_personality_tfmodifier" value="1" readonly /></div>
                    <div class="abilityRanks"><input type="number" name="attr_personality_ranks" value="2" /></div>
                    <div class="abilityRacial"><input type="number" name="attr_personality_racial" value="0" /></div>
                    <div class="abilityTotal"><input type="number" name="attr_personality" value="2" readonly /></div>
                    <input type="hidden" value="0" name="attr_personality_tf">
                </div>
                <div class="save-table">
                    <!--Impulsive (Agility), Corporeal (Tenacity), Cognitive (Insight), Morale (Personality)-->
                    <div class="save-name"><p>PROF. NAME</p></div>
                    <div class="save-misc"><p>MISC</p></div>
                    <div class="save-total"><p>TOTAL</p></div>

                    <div class="save-name"><input type="checkbox" name="attr_impulsive_proficiency" value="@{tier_of_power}" /><button class="ability" type="roll" name="roll_impulsive" value="/r 1d10!10+@{impulsive}+@{power_die}">Impulsive</button></div>
                    <div class="save-misc"><input type="number" name="attr_impulsive_misc" value="0" /></div>
                    <div class="save-total"><input type="number" name="attr_impulsive" value="[[@{agility_modifier} + @{impulsive_proficiency} + @{impulsive_misc}]]" disabled="true" /></div>
                
                    <div class="save-name"><input type="checkbox" name="attr_corporeal_proficiency" value="@{tier_of_power}" /><button class="ability" type="roll" name="roll_corporeal" value="/r 1d10!10+@{corporeal}+@{power_die}">Corporeal</button></div>
                    <div class="save-misc"><input type="number" name="attr_corporeal_misc" value="0" /></div>
                    <div class="save-total"><input type="number" name="attr_corporeal" value="[[@{tenacity_modifier} + @{corporeal_proficiency} + @{corporeal_misc}]]" disabled="true" /></div>
                    
                    <div class="save-name"><input type="checkbox" name="attr_cognitive_proficiency" value="@{tier_of_power}" /><button class="ability" type="roll" name="roll_cognitive" value="/r 1d10!10+@{cognitive}+@{power_die}">Cognitive</button></div>
                    <div class="save-misc"><input type="number" name="attr_cognitive_misc" value="0" /></div>
                    <div class="save-total"><input type="number" name="attr_cognitive" value="[[@{insight_modifier} + @{cognitive_proficiency} + @{cognitive_misc}]]" disabled="true" /></div>
                
                    <div class="save-name"><input type="checkbox" name="attr_morale_proficiency" value="@{tier_of_power}" /><button class="ability" type="roll" name="roll_morale" value="/r 1d10!10+@{morale}+@{power_die}">Morale</button></div>
                    <div class="save-misc"><input type="number" name="attr_morale_misc" value="0" /></div>
                    <div class="save-total"><input type="number" name="attr_morale" value="[[@{personality_modifier} + @{morale_proficiency} + @{morale_misc}]]" disabled="true" /></div>
                </div>
            </div>
            <div class="skills">
                <label style="text-align:center;">SKILLS</label>
                <div class="skill-table">
                    <p style="padding:5px;">SKILL</p>
                    <p style="padding:5px;">PROF</p>
                    <p style="padding:5px;">MISC</p>
                    <p style="padding:5px;">ABI</p>
                    <p style="padding:5px;">TOTAL</p>
            
                    <button class="skill" type="roll" name="roll_acrobatics" value="/r 1d10!10+@{acrobatics}+@{power_die}">Acrobatics</button>
                    <select class="proficiency-select" name="attr_acrobatics_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_acrobatics_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_acrobatics_mod" value="(@{agility_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_acrobatics" value="(@{agility_modifier}+@{acrobatics_proficiency}+@{acrobatics_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_athletics" value="/r 1d10!10+@{athletics}+@{power_die}">Athletics</button>
                    <select class="proficiency-select" name="attr_athletics_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_athletics_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_athletics_mod" value="(@{force_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_athletics" value="(@{force_modifier}+@{athletics_proficiency}+@{athletics_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_bluff" value="/r 1d10!10+@{bluff}+@{power_die}">Bluff</button>
                    <select class="proficiency-select" name="attr_bluff_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_bluff_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_bluff_mod" value="(@{personality_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_bluff" value="(@{personality_modifier}+@{bluff_proficiency}+@{bluff_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_clairvoyant" value="/r 1d10!10+@{clairvoyant}+@{power_die}">Clairvoyant</button>
                    <select class="proficiency-select" name="attr_clairvoyant_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_clairvoyant_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_clairvoyant_mod" value="(@{spirit_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_clairvoyant" value="(@{spirit_modifier}+@{clairvoyant_proficiency}+@{clairvoyant_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_concealment" value="/r 1d10!10+@{concealment}+@{power_die}">Concealment</button>
                    <select class="proficiency-select" name="attr_concealment_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_concealment_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_concealment_mod" value="(@{spirit_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_concealment" value="(@{spirit_modifier}+@{concealment_proficiency}+@{concealment_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_craft_weapon" value="/r 1d10!10+@{craft_weapon}+@{power_die}">Craft (Weapon)</button>
                    <select class="proficiency-select" name="attr_craft_weapon_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_craft_weapon_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_craft_weapon_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_craft_weapon" value="(@{scholarship_modifier}+@{craft_weapon_proficiency}+@{craft_weapon_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_craft_apparel" value="/r 1d10!10+@{craft_apparel}+@{power_die}">Craft (Apparel)</button>
                    <select class="proficiency-select" name="attr_craft_apparel_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_craft_apparel_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_craft_apparel_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_craft_apparel" value="(@{scholarship_modifier}+@{craft_apparel_proficiency}+@{craft_apparel_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_craft_basicitem" value="/r 1d10!10+@{craft_basicitem}+@{power_die}">Craft (Basic Item)</button>
                    <select class="proficiency-select" name="attr_craft_basicitem_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_craft_basicitem_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_craft_basicitem_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_craft_basicitem" value="(@{scholarship_modifier}+@{craft_basicitem_proficiency}+@{craft_basicitem_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_craft_vehicle" value="/r 1d10!10+@{craft_vehicle}+@{power_die}">Craft (Vehicle)</button>
                    <select class="proficiency-select" name="attr_craft_vehicle_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_craft_vehicle_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_craft_vehicle_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_craft_vehicle" value="(@{scholarship_modifier}+@{craft_vehicle_proficiency}+@{craft_vehicle_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_creature_handling" value="/r 1d10!10+@{creature_handling}+@{power_die}">Creature Handling</button>
                    <select class="proficiency-select" name="attr_creature_handling_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_creature_handling_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_creature_handling_mod" value="(@{insight_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_creature_handling" value="(@{insight_modifier}+@{creature_handling_proficiency}+@{creature_handling_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_intimidate" value="/r 1d10!10+@{intimidate}+@{power_die}">Intimidate</button>
                    <select class="proficiency-select" name="attr_intimidate_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_intimidate_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_intimidate_mod" value="(@{personality_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_intimidate" value="(@{personality_modifier}+@{intimidate_proficiency}+@{intimidate_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_investigation" value="/r 1d10!10+@{investigation}+@{power_die}">Investigation</button>
                    <select class="proficiency-select" name="attr_investigation_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_investigation_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_investigation_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_investigation" value="(@{scholarship_modifier}+@{investigation_proficiency}+@{investigation_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                    
                    <p class="skill">KNOWLEDGE</p><div></div><div></div><div></div><div></div>
                </div>
                <fieldset class="repeating_knowledge">
                    <button class="skill" type="roll" name="roll_knowledge" value="/r 1d10!10+@{knowledge}+@{power_die}">Knowledge</button>
                    <select class="proficiency-select" name="attr_knowledge_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_knowledge_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_knowledge_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_knowledge" value="(@{scholarship_modifier}+@{knowledge_proficiency}+@{knowledge_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                </fieldset>
                <div class="skill-table">
                    <button class="skill" type="roll" name="roll_medicine" value="/r 1d10!10+@{medicine}+@{power_die}">Medicine</button>
                    <select class="proficiency-select" name="attr_medicine_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_medicine_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_medicine_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_medicine" value="(@{scholarship_modifier}+@{medicine_proficiency}+@{medicine_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_perception" value="/r 1d10!10+@{perception}+@{power_die}">Perception</button>
                    <select class="proficiency-select" name="attr_perception_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_perception_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_perception_mod" value="(@{insight_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_perception" value="(@{insight_modifier}+@{perception_proficiency}+@{perception_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_performance" value="/r 1d10!10+@{performance}+@{power_die}">Performance</button>
                    <select class="proficiency-select" name="attr_performance_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_performance_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_performance_mod" value="(@{personality_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_performance" value="(@{personality_modifier}+@{performance_proficiency}+@{performance_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_persuasion" value="/r 1d10!10+@{persuasion}+@{power_die}">Persuasion</button>
                    <select class="proficiency-select" name="attr_persuasion_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_persuasion_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_persuasion_mod" value="(@{personality_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_persuasion" value="(@{personality_modifier}+@{persuasion_proficiency}+@{persuasion_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_pilot" value="/r 1d10!10+@{pilot}+@{power_die}">Pilot</button>
                    <select class="proficiency-select" name="attr_pilot_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_pilot_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_pilot_mod" value="(@{agility_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_pilot" value="(@{agility_modifier}+@{pilot_proficiency}+@{pilot_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />

                    <button class="skill" type="roll" name="roll_perception" value="/r 1d10!10+@{perception}+@{power_die}">Perception</button>
                    <select class="proficiency-select" name="attr_perception_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_perception_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_perception_mod" value="(@{insight_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_perception" value="(@{insight_modifier}+@{perception_proficiency}+@{perception_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                    
                    <p class="skill">PROFESSION</p><div></div><div></div><div></div><div></div>
                </div>
                <fieldset class="repeating_profession">
                    <button class="skill" type="roll" name="roll_profession" value="/r 1d10!10+@{profession}+@{power_die}">Profession</button>
                    <select class="proficiency-select" name="attr_profession_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_profession_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_profession_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_profession" value="(@{scholarship_modifier}+@{profession_proficiency}+@{profession_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                </fieldset>
                <div class="skill-table">
                    <button class="skill" type="roll" name="roll_science" value="/r 1d10!10+@{science}+@{power_die}">Science</button>
                    <select class="proficiency-select" name="attr_science_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_science_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_science_mod" value="(@{scholarship_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_science" value="(@{scholarship_modifier}+@{science_proficiency}+@{science_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                    
                    <button class="skill" type="roll" name="roll_stealth" value="/r 1d10!10+@{stealth}+@{power_die}">Stealth</button>
                    <select class="proficiency-select" name="attr_stealth_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_stealth_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_stealth_mod" value="(@{agility_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_stealth" value="(@{agility_modifier}+@{stealth_proficiency}+@{stealth_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                    
                    <button class="skill" type="roll" name="roll_survival" value="/r 1d10!10+@{survival}+@{power_die}">Survival</button>
                    <select class="proficiency-select" name="attr_survival_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_survival_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_survival_mod" value="(@{insight_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_survival" value="(@{insight_modifier}+@{survival_proficiency}+@{survival_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                    
                    <button class="skill" type="roll" name="roll_thievery" value="/r 1d10!10+@{thievery}+@{power_die}">Thievery</button>
                    <select class="proficiency-select" name="attr_thievery_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_thievery_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_thievery_mod" value="(@{agility_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_thievery" value="(@{agility_modifier}+@{thievery_proficiency}+@{thievery_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                    
                    <button class="skill" type="roll" name="roll_use_magic" value="/r 1d10!10+@{use_magic}+@{power_die}">Use Magic</button>
                    <select class="proficiency-select" name="attr_use_magic_proficiency">
                        <option value="0">No Proficiency</option>
                        <option value="2+@{tier_of_power}">Experienced</option>
                        <option value="4+@{tier_of_power}">Trained</option>
                        <option value="6+@{tier_of_power}">Qualified</option>
                        <option value="8+@{tier_of_power}">Specialist</option>
                        <option value="10+@{tier_of_power}">Expert</option>
                    </select>
                    <input class="skill-number" type="number" name="attr_use_magic_misc" value="0" />
                    <input class="skill-number" type="number" name="attr_use_magic_mod" value="(@{spirit_modifier})" disabled="true" />
                    <input class="skill-number" type="number" name="attr_use_magic" value="(@{spirit_modifier}+@{use_magic_proficiency}+@{use_magic_misc}+floor(@{scholarship_modifier}/2))" disabled="true" />
                </div>
            </div>


        </div>
    </div>
</div>




<div class='attacks'>
    <h1>Attacks</h1>
    <h2>Technique Points <input type="number" name="attr_technique_points" value="0"/></h2>
    <h2>Soak <input type="number" name="attr_soak" value="0"/>/<input type="number" name="attr_soak_max" value="@{hidden_soak}+@{soak_modifier}"  disabled> Modifier: <input type="number" name="attr_soak_modifier" value="0"/></h2>
    <h2>Dodge <input type="number" name="attr_dodge_modifier" value="0"/><button class="attack-button" type="roll" name="roll_dodge" value="/r 1d10!10+@{dodge_modifier}+@{agility_modifier}"></button></h2>
    <input type="hidden" name="attr_hidden_soak" value="0">
    <div style="display: flex;"><h2>Hit Modifier: <input type="number" name="attr_global_hit" value="0"></h2><h2>Wound Modifier: <input type="number" name="attr_global_wound" value="0"></h2></div>
    
    <div class="basic-attack">
        <!-- Basic Attack Header -->
        <div class="attack-category-head">TYPE</div>
        <div class="attack-name-head">NAME</div>
        <div class="attack-misc-strike-head">STRIKE MISC</div>
        <div class="attack-strike-head">STRIKE</div>
        <div class="attack-misc-wound-head">WOUND MISC</div>
        <div class="attack-wound-head">WOUND</div>
        <div class="attack-ki-cost-head">KI COST</div>

        <div class="attack-physical">Physical</div>
        <div class="attack-physical-content">
            <button class="ability" type="roll" name="roll_simple" value="&{template:default} {{name=Simple Physical Attack}} {{strike=[[1d10!10 + @{simple_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{simple_wound} + [EXTRA DIE] @{power_die}]]}}">Simple</button>
            <input type="number" name="attr_simple_strike_misc" value="0" />
            <input type="number" name="attr_simple_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{simple_strike_misc}))" disabled="true" />
            <input type="number" name="attr_simple_wound_misc" value="0" />
            <input type="number" name="attr_simple_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{simple_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_simple_ki_cost" value="(@{ki_wager})" disabled="true" />

            <button class="ability" type="roll" name="roll_combination" value="&{template:default} {{name=Combination Physical Attack}} {{strike=[[1d10!10 + @{combination_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[([HITS] [[1d10!10 + [[@{tier_of_power}]]d4]] * 2) + @{combination_wound} + [EXTRA DIE] @{power_die}]]}}">Combination</button>
            <input type="number" name="attr_combination_strike_misc" value="0" />
            <input type="number" name="attr_combination_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{combination_strike_misc}))" disabled="true" />
            <input type="number" name="attr_combination_wound_misc" value="0" />
            <input type="number" name="attr_combination_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{combination_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_combination_ki_cost" value="((@{tier_of_power}) * 6 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_powered" value="&{template:default} {{name=Powered Physical Attack}} {{strike=[[1d10!10 + @{powered_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{powered_wound} + [EXTRA DIE] @{power_die}]]}}">Powered</button>
            <input type="number" name="attr_powered_strike_misc" value="0" />
            <input type="number" name="attr_powered_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{powered_strike_misc}))" disabled="true" />
            <input type="number" name="attr_powered_wound_misc" value="0" />
            <input type="number" name="attr_powered_wound" value="([FORCE] (@{force_tfmodifier}) * 2 + [MISC] (@{global_wound} + @{powered_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_powered_ki_cost" value="((@{tier_of_power}) * 4 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_crushing" value="&{template:default} {{name=Crushing Physical Attack}} {{strike=[[1d10!10 + @{crushing_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[[[@{tier_of_power}]]d6 + @{crushing_wound} + [EXTRA DIE] @{power_die}]]}}">Crushing</button>
            <input type="number" name="attr_crushing_strike_misc" value="0" />
            <input type="number" name="attr_crushing_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{crushing_strike_misc}))" disabled="true" />
            <input type="number" name="attr_crushing_wound_misc" value="0" />
            <input type="number" name="attr_crushing_wound" value="([MISC] (@{global_wound} + @{crushing_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_crushing_ki_cost" value="((@{tier_of_power}) * 6 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_sweeping" value="&{template:default} {{name=Sweeping Physical Attack}} {{strike=[[1d10!10 + @{sweeping_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{sweeping_wound} + [EXTRA DIE] @{power_die}]]}}">Sweeping</button>
            <input type="number" name="attr_sweeping_strike_misc" value="0" />
            <input type="number" name="attr_sweeping_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{sweeping_strike_misc}))" disabled="true" />
            <input type="number" name="attr_sweeping_wound_misc" value="0" />
            <input type="number" name="attr_sweeping_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{sweeping_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_sweeping_ki_cost" value="((@{tier_of_power}) * 5 + @{ki_wager})" disabled="true" />
        </div>

        <div class="attack-energy">Energy</div>
        <div class="attack-energy-content">
            <button class="ability" type="roll" name="roll_sphere" value="&{template:default} {{name=Sphere Energy Attack}} {{strike=[[1d10!10 + @{sphere_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{sphere_wound} + [EXTRA DIE] @{power_die}]]}}">Sphere</button>
            <input type="number" name="attr_sphere_strike_misc" value="0" />
            <input type="number" name="attr_sphere_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{sphere_strike_misc}))" disabled="true" />
            <input type="number" name="attr_sphere_wound_misc" value="0" />
            <input type="number" name="attr_sphere_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{sphere_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_sphere_ki_cost" value="((@{tier_of_power}) * 2 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_rapid" value="&{template:default} {{name=Rapid Fire Energy Attack}} {{strike=[[1d10!10 + @{rapid_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[([HITS] [[1d10!10 + [[@{tier_of_power}]]d4]] * 2) + @{rapid_wound} + [EXTRA DIE] @{power_die}]]}}">Rapid Fire</button>
            <input type="number" name="attr_rapid_strike_misc" value="0" />
            <input type="number" name="attr_rapid_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{rapid_strike_misc}))" disabled="true" />
            <input type="number" name="attr_rapid_wound_misc" value="0" />
            <input type="number" name="attr_rapid_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{rapid_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_rapid_ki_cost" value="((@{tier_of_power}) * 6 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_kiai" value="&{template:default} {{name=Kiai Energy Attack}} {{strike=[[{1d10!10,1d10!10}kh1 + @{kiai_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[2d10kl1 + @{kiai_wound} + [EXTRA DIE] @{power_die}]]}}">Kiai</button>
            <input type="number" name="attr_kiai_strike_misc" value="0" />
            <input type="number" name="attr_kiai_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{kiai_strike_misc}))" disabled="true" />
            <input type="number" name="attr_kiai_wound_misc" value="0" />
            <input type="number" name="attr_kiai_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{kiai_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_kiai_ki_cost" value="((@{tier_of_power}) * 4 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_blast" value="&{template:default} {{name=Blast Energy Attack}} {{strike=[[1d10!10 + @{blast_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{blast_wound} + [EXTRA DIE] @{power_die}]]}}">Blast</button>
            <input type="number" name="attr_blast_strike_misc" value="0" />
            <input type="number" name="attr_blast_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{blast_strike_misc}))" disabled="true" />
            <input type="number" name="attr_blast_wound_misc" value="0" />
            <input type="number" name="attr_blast_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{blast_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_blast_ki_cost" value="((@{tier_of_power}) * 5 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_explosion" value="&{template:default} {{name=Explosion Energy Attack}} {{strike=[[1d10!10 + @{explosion_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{explosion_wound} + [EXTRA DIE] @{power_die}]]}}">Explosion</button>
            <input type="number" name="attr_explosion_strike_misc" value="0" />
            <input type="number" name="attr_explosion_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{explosion_strike_misc}))" disabled="true" />
            <input type="number" name="attr_explosion_wound_misc" value="0" />
            <input type="number" name="attr_explosion_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{explosion_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_explosion_ki_cost" value="((@{tier_of_power}) * 6 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_beam" value="&{template:default} {{name=Beam Energy Attack}} {{strike=[[1d10!10 + @{beam_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{beam_wound} + [EXTRA DIE] @{power_die}]]}}">Beam</button>
            <input type="number" name="attr_beam_strike_misc" value="0" />
            <input type="number" name="attr_beam_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{beam_strike_misc}))" disabled="true" />
            <input type="number" name="attr_beam_wound_misc" value="0" />
            <input type="number" name="attr_beam_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{beam_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_beam_ki_cost" value="((@{tier_of_power}) * 8 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_cutting" value="&{template:default} {{name=Cutting Energy Attack}} {{strike=[[1d10!10 + @{cutting_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{cutting_wound} + [EXTRA DIE] @{power_die}]]}}">Cutting</button>
            <input type="number" name="attr_cutting_strike_misc" value="0" />
            <input type="number" name="attr_cutting_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{cutting_strike_misc}))" disabled="true" />
            <input type="number" name="attr_cutting_wound_misc" value="0" />
            <input type="number" name="attr_cutting_wound" value="([FORCE] @{force_tfmodifier} + [MISC] (@{global_wound} + @{cutting_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_cutting_ki_cost" value="((@{tier_of_power}) * 8 + @{ki_wager})" disabled="true" />
        </div>

        <div class="attack-magic">Magic</div>
        <div class="attack-magic-content">
            <button class="ability" type="roll" name="roll_spell" value="&{template:default} {{name=Spell Magical Attack}} {{strike=[[1d10!10 + @{spell_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{spell_wound} + [EXTRA DIE] @{power_die}]]}}">Spell</button>
            <input type="number" name="attr_spell_strike_misc" value="0" />
            <input type="number" name="attr_spell_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{spell_strike_misc}))" disabled="true" />
            <input type="number" name="attr_spell_wound_misc" value="0" />
            <input type="number" name="attr_spell_wound" value="([SPIRIT] @{spirit_tfmodifier} + [MISC] (@{global_wound} + @{spell_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_spell_ki_cost" value="((@{tier_of_power}) * 2 + @{ki_wager})" disabled="true" />
            
            <button class="ability" type="roll" name="roll_elemental" value="&{template:default} {{name=Elemental Magical Attack}} {{strike=[[1d10!10 + @{elemental_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{elemental_wound} + [EXTRA DIE] @{power_die}]]}}">Elemental</button>
            <input type="number" name="attr_elemental_strike_misc" value="0" />
            <input type="number" name="attr_elemental_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{elemental_strike_misc}))" disabled="true" />
            <input type="number" name="attr_elemental_wound_misc" value="0" />
            <input type="number" name="attr_elemental_wound" value="([SPIRIT] @{spirit_tfmodifier} + [MISC] (@{global_wound} + @{elemental_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_elemental_ki_cost" value="((@{tier_of_power}) * 10 + @{ki_wager})" disabled="true" />

            <button class="ability" type="roll" name="roll_spiritual" value="&{template:default} {{name=Spiritual Assault Magical Attack}} {{strike=[[1d10!10 + @{spiritual_strike} + [EXTRA DIE] @{power_die}]]}} {{wound=[[1d10!10 + @{spiritual_wound} + [EXTRA DIE] @{power_die}]]}}">Spiritual Assault</button>
            <input type="number" name="attr_spiritual_strike_misc" value="0" />
            <input type="number" name="attr_spiritual_strike" value="([HASTE] floor(@{agility_tfmodifier}/2) + [AWARENESS] @{insight_tfmodifier} + [MISC] (@{global_hit} + @{spiritual_strike_misc}))" disabled="true" />
            <input type="number" name="attr_spiritual_wound_misc" value="0" />
            <input type="number" name="attr_spiritual_wound" value="([SPIRIT] @{spirit_tfmodifier} + [MISC] (@{global_wound} + @{spiritual_wound_misc}) + [WAGER] @{ki_wager})"  disabled="true" />
            <input type="number" name="attr_spiritual_ki_cost" value="((@{tier_of_power}) * 8 + @{ki_wager})" disabled="true" />
            
            
        </div>

        <div class="attack-footer">
            <h3>Ki Wager: </h3><input type="number" name="attr_ki_wager" value="0" />
        </div>
    </div>
    <br>
    <div class="custom-attacks">
        <div class="custom-attacks-top">
            <div class="custom-attacks-hcol1">
                <h2 style="border: 1px solid darkgray;">Name:</h2>
            </div>
            <div class="custom-attacks-hcol2">
                <h2 style="border: 1px solid darkgray;">Ki Cost:</h2>
            </div>
            <div class="custom-attacks-hcol3">
                <h2 style="border: 1px solid darkgray;">TP Cost:</h2>
            </div>
            <div class="custom-attacks-hcol4">
                <h2 style="border: 1px solid darkgray;">Roll:</h2>
            </div>
            <div class="custom-attacks-hcol5">
                <h2 style="border: 1px solid darkgray;">To Wound:</h2>
            </div>
        </div>

        <div class="custom-attacks-bottom">
            <fieldset class="repeating_custom-attacks-table">
                <div class="custom-attack-table">
                    <div class="ccol1"><input type="text" name="attr_custom_attack_name" style="width: 100px;"></div>
                    <div class="ccol2"><input type="number" name="attr_custom_attack_ki" value="0"></div>
                    <div class="ccol3"><input type="number" name="attr_custom_attack_technique" value="0" ></div>  
                    <div class="ccol4"><input type="text" name="attr_custom_attack_hit" value="0" style="width: 50px;"></div>
                    <div class="ccol5"><input type="text" name="attr_custom_attack_wound" value="0" style="width: 50px;"><button class="attack-button" type="roll" name="roll_custom_attack" value="/em @{custom_attack_name} for [[@{custom_attack_hit}+@{power_die}+floor(@{agility_modifier}/2)+@{insight_modifier}+@{global_hit}]], dealing [[@{custom_attack_wound}+@{power_die}+@{global_wound}+?{What ability are you using?|force,@{force_modifier} | Spirit,@{spirit_modifier} | Balistic, 0}+@{global_wound}]] and costing @{custom_attack_ki} ki"></button></div>
                </div>
            </fieldset>
        </div>
    </div>
</div>



<div class='abilities'>
    <h1>Abilities</h1>
    <h2>Karma: <input type="number" name="attr_karma" max="10" value="5"></h2>
    <div style="border: 3px solid darkgray;">
        <h2>Z Soul: <input type="text" name="attr_z_soul"></h2>
        <h2>Z Soul: <input type="text" name="attr_z_soul2"></h2>
        <h2>Z Soul: <input type="text" name="attr_z_soul3"></h2>
    </div>
    <br>

    <div style="border: 3px solid darkgray; border-collapse: collapse;">
        <h2 style="border: 1px solid darkgray;">Equipment</h2>
        <fieldset class="repeating_equipment" >
            <div class="equipmentTable">
                <div style="grid-area: gear1;"><h3 style="color: darkgray;">Name: <input type="text" name="attr_gear_name" style="width: 150px;"></h3></div>
                <div style="grid-area: gear2;"><h3 style="color: darkgray;">Name: <input type="text" name="attr_gear_name2" style="width: 150px;"></h3></div>
                <div style="grid-area: gear3;"><h3 style="color: darkgray;">Name: <input type="text" name="attr_gear_name3" style="width: 150px;"></h3></div>
            </div>
        </fieldset>
    </div>

    <br>

    <h2>Talents and Abilities</h2>
    <div style="border: 3px solid darkgray;">
        <fieldset class="repeating_talents">
            <input class="showhidebox" type="checkbox" name="attr_toggle-show" value="1" />
            <div class="talent-table talent-verbose">
                <input class="talent-name" type="text" name="attr_name" style="width:100%"; placeholder="Name"/>
                <input class="talent-short-desc" type="text" name="attr_short_description" placeholder="Short Description"/>
                <div class="auto-expand talent-long-desc">
	                <span name="attr_description"></span>
                    <textarea name="attr_description" rows="5" placeholder="Description"></textarea>
                </div>
            </div>
            <div class="talent-simple">
                <button type="roll" name="roll_talent" value="&{template:default} {{name=@{name}}} {{description=@{description}}}"><b><span name="attr_name"></span></b></button><br>
                <span name="attr_short_description"></span>
            </div>
        </fieldset>
    </div>
</div>



<div class='transformations'>
    <h1>Transformations</h1>
    <h2>Stress Test<button class="stress-button" name="roll_stress_test" type="roll" value="/em [[1d10 + @{power_level} + floor(@{personality_modifier}/2)]]"></button></h2>
    <h2>Training Roll <input type="number" min="1" value="1" name="attr_intensity"><button class="stress-button" name="roll_training" type="roll" value="/em puts their body on the line in training, attempt [[@{intensity}d10!10+@{agility_modifier}+@{tenacity_modifier}+@{insight_modifier}+@{personality_modifier}]]>[[?{Condition Range? |Very Easy, 10*@{intensity}+floor(@{power_level}/5)*5|Easy, 20*@{intensity}+floor(@{power_level}/5)*5|Medium, 30*@{intensity}+floor(@{power_level}/5)*5|Hard, 40*@{intensity}+floor(@{power_level}/5)*5|Very Hard, 50*@{intensity}+floor(@{power_level}/5)*5|Nearly Impossible, 60*@{intensity}+floor(@{power_level}/5)*5}]] gaining [[@{power_level}*@{intensity}]] xp"></button></h2>
    <div class="transformations-page">
        <div class="transformations-top">
            <div style="grid-area: tn; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>Name:</h3></div>
            <!--<div style="grid-area: tty; border-right: 1px solid silver;"><h3 style="color: silver;">Type:</h3></div>-->
            <div style="grid-area: tag; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>AG:</h3></div>
            <div style="grid-area: tfo; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>FO:</h3></div>
            <div style="grid-area: tte; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>TE:</h3></div>
            <div style="grid-area: tsc; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>SC:</h3></div>
            <div style="grid-area: tin; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>IN:</h3></div>
            <div style="grid-area: tsp; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>SP:</h3></div>
            <div style="grid-area: tpe; border-right: 1px solid darkgray; border-bottom: 1px solid darkgray;"><h3>PE:</h3></div>
        </div>

        <div class="transformations-bot">
            <fieldset class="repeating_transformations">
                <div class="transformations-table" style="border-top: none;">
                    <div class="tname"><input type="text" name="attr_name" style = "width: 100px;"><input type="checkbox" name="attr_active" value="1"></div>
                    <div class="tagi"><input type="text" name="attr_agility" style = "width: 60px;" value="0"></div>
                    <div class="tfor"><input type="text" name="attr_force" style = "width: 60px;" value="0"></div>
                    <div class="tten"><input type="text" name="attr_tenacity" style = "width: 60px;" value="0"></div>
                    <div class="tsch"><input type="text" name="attr_scholarship" style = "width: 60px;" value="0"></div>
                    <div class="tins"><input type="text" name="attr_insight" style = "width: 60px;" value="0"></div>
                    <div class="tspi"><input type="text" name="attr_spirit" style = "width: 60px;" value="0"></div>
                    <div class="tper"><input type="text" name="attr_personality" style = "width: 60px;" value="0"></div>
                </div>
            </fieldset>
        </div>
    </div>
</div>

<div class='settings'>
    <div class="attr-head">
        <h1>Settings</h1>
    </div>
    <div><button type="action" name="act_recalc_stats">Recalculate Stats</button></div>
</div>

<script type="text/worker">
    

    const buttonlist = ["attributes","attacks","abilities","transformations", "settings"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

    /*
        Powerlevel logic
    */
    on("change:power_level", function(){
        getAttrs(["POWER_LEVEL"], function(values){
            var dicelist = [0,4,6,8];
            var tier = Math.floor(values.POWER_LEVEL/5)+1;
            var d10s = Math.floor((tier-1)/4);
            var die = "";
            if (d10s > 0){
                die += Math.floor((tier-1)/4) + "d10 + ";
            }
            die += "1d"+dicelist[(tier-1)%4];
            var capacity = 14 + ((values.POWER_LEVEL-1)*6);
            var ki_pool = 26 + ((values.POWER_LEVEL-1)*12);
            setAttrs({
                "power_die":die,
                "tier_of_power":tier,
                "ki_max":ki_pool,
                "capacity_max": capacity
            });
        });
    });

    /*
        Race logic
    */
    on("change:race", function(){                
        getAttrs(["RACE"], function(values){
            var race = values.RACE;
            
            switch (race){
                case "android":
                    setAttrs({
                        "subrace":"Artificial Construct, Cybernetic Organism, Bio-Engineered"
                    });
                    break;
                case "arcosian":
                    setAttrs({
                        "subrace":"Arcosian"
                    });
                    break;
                case "human":
                    setAttrs({
                        "subrace":"Earthling, Beast-men"
                    });
                    break;
                case "namekians":
                    setAttrs({
                        "subrace":"Warrior, Priest"
                    });
                    break;
                case "majin":
                    setAttrs({
                        "subrace":"Majin"
                    });
                    break;
                case "saiyan":
                    setAttrs({
                        "subrace":"Full Blood, Half-Blood"
                    });
                    break;
                case "shinjin":
                    setAttrs({
                        "subrace":"Kaio, Makaio"
                    });
                    break;
                case "tuffle":
                    setAttrs({
                        "subrace":""
                    });
                    break;
                case "custom":
                    setAttrs({
                        "subrace":""
                    });
                    break;
            };
        });
    });

    on("change:subrace", function(){
        getAttrs(["SUBRACE", "RACE"], function(values){
            var subrace = values.SUBRACE;
            var race = values.RACE;
            
            if(race == "android"){
                if(subrace == "Bio-Engineered"){
                    setAttrs({
                        "hp_modifier":5
                    });
                }else{
                    setAttrs({
                        "hp_modifier":4
                    });
                }
                setAttrs({
                    "agility_racial":0,
                    "force_racial":3,
                    "tenacity_racial":3,
                    "scholarship_racial":0,
                    "insight_racial":2,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }else if(subrace == "Arcosian"){
                setAttrs({
                    "hp_modifier":3,
                    "agility_racial":3,
                    "force_racial":2,
                    "tenacity_racial":3,
                    "scholarship_racial":0,
                    "insight_racial":0,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }else if(race == "human"){
                setAttrs({
                    "hp_modifier":4,
                    "agility_racial":0,
                    "force_racial":0,
                    "tenacity_racial":0,
                    "scholarship_racial":0,
                    "insight_racial":0,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }else if(race == "namekians"){
                setAttrs({
                    "hp_modifier":4,
                    "agility_racial":0,
                    "force_racial":0,
                    "tenacity_racial":3,
                    "scholarship_racial":0,
                    "insight_racial":3,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }else if(subrace == "Majin"){
                setAttrs({
                    "hp_modifier":3,
                    "agility_racial":0,
                    "force_racial":0,
                    "tenacity_racial":2,
                    "scholarship_racial":0,
                    "insight_racial":0,
                    "spirit_racial":0,
                    "personality_racial":3,
                });
            }else if(race == "saiyan"){
                setAttrs({
                    "hp_modifier":4,
                    "agility_racial":2,
                    "force_racial":3,
                    "tenacity_racial":3,
                    "scholarship_racial":0,
                    "insight_racial":0,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }else if(race == "shinjin"){
                if(subrace == "Kaio"){
                    setAttrs({
                        "hp_modifier":5
                    });
                }else{
                    setAttrs({
                        "hp_modifier":4
                    });
                }
                setAttrs({
                    "agility_racial":0,
                    "force_racial":0,
                    "tenacity_racial":0,
                    "scholarship_racial":0,
                    "insight_racial":3,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }else if(race == "tuffle"){
                setAttrs({
                    "hp_modifier":4,
                    "agility_racial":0,
                    "force_racial":0,
                    "tenacity_racial":3,
                    "scholarship_racial":2,
                    "insight_racial":3,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }else if(race == "custom"){
                setAttrs({
                    "hp_modifier":4,
                    "agility_racial":0,
                    "force_racial":0,
                    "tenacity_racial":0,
                    "scholarship_racial":0,
                    "insight_racial":0,
                    "spirit_racial":0,
                    "personality_racial":0,
                });
            }
        });
    });

    /*
    Ability Logic
    */
    function update_stats(){
        /* This may be considered an abomination by some */
        getAttrs([
        "agility_ranks",
        "agility_racial",
        "agility_tf",

        "force_ranks",
        "force_racial",
        "force_tf",

        "tenacity_ranks",
        "tenacity_racial",
        "tenacity_tf",

        "scholarship_ranks",
        "scholarship_racial",
        "scholarship_tf",

        "insight_ranks",
        "insight_racial",
        "insight_tf",

        "spirit_ranks",
        "spirit_racial",
        "spirit_tf",

        "personality_ranks",
        "personality_racial",
        "personality_tf",

        "impulsive_misc",
        "impulsive_proficiency"
        ], function(values){
            var agility = +values.agility_ranks + +values.agility_racial;
            var force = +values.force_ranks + +values.force_racial;
            var tenacity = +values.tenacity_ranks + +values.tenacity_racial;
            var scholarship = +values.scholarship_ranks + +values.scholarship_racial;
            var insight = +values.insight_ranks + +values.insight_racial;
            var spirit = +values.spirit_ranks + +values.spirit_racial;
            var personality = +values.personality_ranks + +values.personality_racial;
            setAttrs({
                "agility":agility,
                "agility_modifier":(Math.floor(agility/2)),
                "agility_tfmodifier":(Math.floor(agility/2) + +values.agility_tf),

                "force":force,
                "force_modifier":(Math.floor(force/2)),
                "force_tfmodifier":(Math.floor(force/2) + +values.force_tf),
                
                "tenacity":tenacity,
                "tenacity_modifier":(Math.floor(tenacity/2)),
                "tenacity_tfmodifier":(Math.floor(tenacity/2) + +values.tenacity_tf),
                
                "scholarship":scholarship,
                "scholarship_modifier":(Math.floor(scholarship/2)),
                "scholarship_tfmodifier":(Math.floor(scholarship/2) + +values.scholarship_tf),
                
                "insight":insight,
                "insight_modifier":(Math.floor(insight/2)),
                "insight_tfmodifier":(Math.floor(insight/2) + +values.insight_tf),
                
                "spirit":spirit,
                "spirit_modifier":(Math.floor(spirit/2)),
                "spirit_tfmodifier":(Math.floor(spirit/2) + +values.spirit_tf),
                
                "personality":personality,
                "personality_modifier":(Math.floor(personality/2)),
                "personality_tfmodifier":(Math.floor(personality/2) + +values.personality_tf)
            });
        });
    }

    on("change:agility_ranks", function(){                
        update_stats();
    });
    on("change:agility_racial", function(){
        update_stats();
    });

    on("change:force_ranks", function(){                
        update_stats();
    });
    on("change:force_racial", function(){
        update_stats();
    });
    
    on("change:tenacity_ranks", function(){                
        update_stats();
    });
    on("change:tenacity_racial", function(){
        update_stats();
    });
    
    on("change:scholarship_ranks", function(){                
        update_stats();
    });
    on("change:scholarship_racial", function(){
        update_stats();
    });
    
    on("change:insight_ranks", function(){                
        update_stats();
    });
    on("change:insight_racial", function(){
        update_stats();
    });
    
    on("change:spirit_ranks", function(){                
        update_stats();
    });
    on("change:spirit_racial", function(){
        update_stats();
    });
    
    on("change:personality_ranks", function(){                
        update_stats();
    });
    on("change:personality_racial", function(){
        update_stats();
    });

    /*
        Hidden soak logic
    */
    on("change:tenacity, sheet:opened", function(){
        getAttrs(["TENACITY_MODIFIER"], function(values){
            var ten = values.TENACITY_MODIFIER;
            if(ten == 1){
                setAttrs({
                    "hidden_soak":2
                });
            }else{
                setAttrs({
                    "hidden_soak":ten
                });
            };
        });
    });
    /*
        Transformation logic
    */

    function parseNumber(value, tier){
        var result = 0;
        var token = 0;
        const numberRegex = /^([\-0-9]*)/g;
        const tierRegex = /^(\([tT]\))/g;
        while (value.length>0){
            var match = value.match(numberRegex);
            if (match != null && match[0] != ''){
                /* Number detected - Take the shot */
                value = value.substring(match[0].length);
                result += parseInt(match[0]);
                continue;
            }
            match = value.match(tierRegex);
            if (match != null && match[0] != ''){
                console.log("tier of power detected");
                /* Tier detected - Take the shot */
                value = value.substring(match[0].length);
                result *= tier;
                continue;
            }
            value = value.substring(1);
        }
        return result;
    }

    on("change:repeating_transformations:active", function(){
        getAttrs([
            "repeating_transformations_active",
            "repeating_transformations_agility",
            "repeating_transformations_force",
            "repeating_transformations_tenacity",
            "repeating_transformations_scholarship",
            "repeating_transformations_insight",
            "repeating_transformations_spirit",
            "repeating_transformations_personality",
            "agility_tf",
            "force_tf",
            "tenacity_tf",
            "scholarship_tf",
            "insight_tf",
            "spirit_tf",
            "personality_tf",
            "tier_of_power"
        ], function(values){
            var on = values.repeating_transformations_active;
            /*
                rp_ defines repeating abilities
                tf_ defines hidden transformation modifier
            */
            var rp_agility = parseNumber(values.repeating_transformations_agility, parseInt(values.tier_of_power));
            var rp_force = parseNumber(values.repeating_transformations_force, parseInt(values.tier_of_power));
            var rp_tenacity = parseNumber(values.repeating_transformations_tenacity, parseInt(values.tier_of_power));
            var rp_scholarship = parseNumber(values.repeating_transformations_scholarship, parseInt(values.tier_of_power));
            var rp_insight = parseNumber(values.repeating_transformations_insight, parseInt(values.tier_of_power));
            var rp_spirit = parseNumber(values.repeating_transformations_spirit, parseInt(values.tier_of_power));
            var rp_personality = parseNumber(values.repeating_transformations_personality, parseInt(values.tier_of_power));
            
            var tf_agility = values.agility_tf;
            var tf_force = values.force_tf;
            var tf_tenacity = values.tenacity_tf;
            var tf_scholarship = values.scholarship_tf;
            var tf_insight = values.insight_tf;
            var tf_spirit = values.spirit_tf;
            var tf_personality = values.personality_tf;
            if (+on){
                setAttrs({
                    "agility_tf":(+tf_agility + +rp_agility),
                    "force_tf":(+tf_force + +rp_force),
                    "tenacity_tf":(+tf_tenacity + +rp_tenacity),
                    "scholarship_tf":(+tf_scholarship + +rp_scholarship),
                    "insight_tf":(+tf_insight + +rp_insight),
                    "spirit_tf":(+tf_spirit + +rp_spirit),
                    "personality_tf":(+tf_personality + +rp_personality),
                });
            }else{
                setAttrs({
                    "agility_tf":(+tf_agility - +rp_agility),
                    "force_tf":(+tf_force - +rp_force),
                    "tenacity_tf":(+tf_tenacity - +rp_tenacity),
                    "scholarship_tf":(+tf_scholarship - +rp_scholarship),
                    "insight_tf":(+tf_insight - +rp_insight),
                    "spirit_tf":(+tf_spirit - +rp_spirit),
                    "personality_tf":(+tf_personality - +rp_personality),
                });
            }
            update_stats();
        });
    });

    on("clicked:recalc_stats", function(){
        setAttrs({
            "agility_tf":0,
            "force_tf":0,
            "tenacity_tf":0,
            "scholarship_tf":0,
            "insight_tf":0,
            "spirit_tf":0,
            "personality_tf":0
        });
        update_stats();
    });
    
</script>
